# zookeeper功能介绍
    ZooKeeper 是apache的一个分布式协调服务的开源产品
    ZooKeeper 实现诸如消息订阅/发布、命名服务、分布式协调/通知、Master选举、分布式锁
    负载均衡、分布式同步、分布式队列

# 功能简介
# 1.消息订阅/发布
    数据发布与订阅，即所谓的配置中心，顾名思义就是发布者将数据发布到 ZooKeeper 节点上,
    供订阅者进行数据订阅，进而达到动态获取数据的目的，实现配置信息的集中式管理和动态更新。
    
        对于：数据量通常比较小。数据内容在运行时动态变化。集群中各机器共享，配置一致。
    这样的全局配置信息就可以发布到 ZooKeeper上，让客户端（集群的机器）去订阅该消息。
    
    发布/订阅系统一般有两种设计模式，分别是推（Push）和拉（Pull）模式。
          - 推模式
              服务端主动将数据更新发送给所有订阅的客户端
          - 拉模式
              客户端主动发起请求来获取最新数据，通常客户端都采用定时轮询拉取的方式
    
    ZooKeeper 采用的是推拉相结合的方式：
        客户端想服务端注册自己需要关注的节点，一旦该节点的数据发生变更，那么服务端就会向相应
    的客户端发送Watcher事件通知，客户端接收到这个消息通知后，需要主动到服务端获取最新的数据


# 2.分布式协调服务/通知
    ZooKeeper 中特有 Watcher 注册与异步通知机制，能够很好的实现分布式环境下不同机器，
    甚至不同系统之间的通知与协调，从而实现对数据变更的实时处理。使用方法通常是不同的客户端
    如果 机器节点 发生了变化，那么所有订阅的客户端都能够接收到相应的Watcher通知，并做出相应
    的处理。
    
    ZooKeeper的分布式协调/通知，是一种通用的分布式系统机器间的通信方式。

# 3.Master选举
    如果当前选举出的 Master 挂了，那么该如何处理？谁来告诉我 Master 挂了呢？
    显然，关系型数据库无法通知我们这个事件。但是，ZooKeeper 可以做到！
    
        利用 ZooKeepr 的强一致性，能够很好地保证在分布式高并发情况下节点的创建一定能够
    保证全局唯一性，即 ZooKeeper 将会保证客户端无法创建一个已经存在的 数据单元节点。
        也就是说，如果同时有多个客户端请求创建同一个临时节点，那么最终一定只有一个客户端
    请求能够创建成功。利用这个特性，就能很容易地在分布式环境中进行 Master 选举了。
    
        成功创建该节点的客户端所在的机器就成为了 Master。同时，其他没有成功创建该节点的
    客户端，都会在该节点上注册一个子节点变更的 Watcher，用于监控当前 Master 机器是否存
    活，一旦发现当前的Master挂了，那么其他客户端将会重新进行 Master 选举。
    
        这样就实现了 Master 的动态选举。

# 4.分布式锁 (排它锁、共享锁)
    锁定义：zookeeper上的机器节点，可以表示一个锁
    排它锁：
        如果能够在当前节点上成功创建一个临时节点、由于zookeeper保证所有客户端中，只会有一个客户端能够创建成功、
        那么说明当前对象获得了锁，当节点宕机/正常执行完毕后，zookeeper会通知其他客户端，重新发起锁竞争
    共享锁：
        需要获取当前锁服务创建临时节点，通过getChildren()获取当前目录最小的目录节点，是否是自己创建的节点
        如果是，则说明已获取了当前锁，如果不是，那么进行监控当前zookeeper目录节点的变化，直至获取锁
        释放锁，删除节点即可
        
    