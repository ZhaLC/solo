# 限流算法

# 注：高并发系统三大利器：缓存，限流，降级

1. 计数器算法 (固定窗口)
    计数器算法是使用计数器在周期内累加访问次数，当达到设定的限流值时，触发限流策略。下一个周期开始时，进行清零，重新计数。
    此算法在单机还是分布式环境下实现都非常简单，使用redis的incr原子自增性和线程安全即可轻松实现

    假设1min内服务器的负载能力为100，因此一个周期的访问量限制在100
    然而在第一个周期的最后5秒和下一个周期的开始5秒时间段内，分别涌入100的访问量，虽然没有超过每个周期的限制量，
    但是整体上10秒内已达到200的访问量，已远远超过服务器的负载能力
    由此可见，计数器算法方式限流对于周期比较长的限流，存在很大的弊端
2. 滑动窗口算法
    滑动窗口算法是将时间周期分为N个小周期，分别记录每个小周期内访问次数，并且根据时间滑动删除过期的小周期

    当滑动窗口的格子划分的越多，那么滑动窗口的滚动就越平滑，限流的统计就会越精确。
    此算法可以很好的解决固定窗口算法的临界问题
3. 漏桶算法
    访问请求到达时直接放入漏桶，如当前容量已达到上限（限流值），则进行丢弃（触发限流策略）
    漏桶以固定的速率进行释放访问请求（即请求通过），直到漏桶为空
4. 令牌桶算法
    程序以r（r=时间周期/限流值）的速度向令牌桶中增加令牌，直到令牌桶满，
    请求到达时向令牌桶请求令牌，如获取到令牌则通过请求，否则触发限流策略
